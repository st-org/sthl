var e={930:function(e){var t;t=()=>{return e={770:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultDebugCall=t.createOnigScanner=t.createOnigString=t.loadWASM=t.OnigScanner=t.OnigString=void 0;const s=r(n(418));let o=null,i=!1;class a{static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){const s=e.charCodeAt(n);let o=s,i=!1;if(s>=55296&&s<=56319&&n+1<r){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(o=65536+(s-55296<<10)|t-56320,i=!0)}t+=o<=127?1:o<=2047?2:o<=65535?3:4,i&&n++}return t}constructor(e){const t=e.length,n=a._utf8ByteLength(e),r=n!==t,s=r?new Uint32Array(t+1):null;r&&(s[t]=n);const o=r?new Uint32Array(n+1):null;r&&(o[n]=t);const i=new Uint8Array(n);let c=0;for(let n=0;n<t;n++){const a=e.charCodeAt(n);let l=a,u=!1;if(a>=55296&&a<=56319&&n+1<t){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(l=65536+(a-55296<<10)|t-56320,u=!0)}r&&(s[n]=c,u&&(s[n+1]=c),l<=127?o[c+0]=n:l<=2047?(o[c+0]=n,o[c+1]=n):l<=65535?(o[c+0]=n,o[c+1]=n,o[c+2]=n):(o[c+0]=n,o[c+1]=n,o[c+2]=n,o[c+3]=n)),l<=127?i[c++]=l:l<=2047?(i[c++]=192|(1984&l)>>>6,i[c++]=128|(63&l)>>>0):l<=65535?(i[c++]=224|(61440&l)>>>12,i[c++]=128|(4032&l)>>>6,i[c++]=128|(63&l)>>>0):(i[c++]=240|(1835008&l)>>>18,i[c++]=128|(258048&l)>>>12,i[c++]=128|(4032&l)>>>6,i[c++]=128|(63&l)>>>0),u&&n++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=i,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}createString(e){const t=e._omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}class c{constructor(e){if(this.id=++c.LAST_ID,!o)throw new Error("Must invoke loadWASM first.");this._onigBinding=o,this.content=e;const t=new a(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!c._sharedPtrInUse?(c._sharedPtr||(c._sharedPtr=o._omalloc(1e4)),c._sharedPtrInUse=!0,o.HEAPU8.set(t.utf8Value,c._sharedPtr),this.ptr=c._sharedPtr):this.ptr=t.createString(o)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===c._sharedPtr?c._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}t.OnigString=c,c.LAST_ID=0,c._sharedPtr=0,c._sharedPtrInUse=!1;class l{constructor(e){if(!o)throw new Error("Must invoke loadWASM first.");const t=[],n=[];for(let r=0,s=e.length;r<s;r++){const s=new a(e[r]);t[r]=s.createString(o),n[r]=s.utf8Length}const r=o._omalloc(4*e.length);o.HEAPU32.set(t,r/4);const s=o._omalloc(4*e.length);o.HEAPU32.set(n,s/4);const i=o._createOnigScanner(r,s,e.length);for(let n=0,r=e.length;n<r;n++)o._ofree(t[n]);o._ofree(s),o._ofree(r),0===i&&function(e){throw new Error(e.UTF8ToString(e._getLastOnigError()))}(o),this._onigBinding=o,this._ptr=i}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=i,s=0;if("number"==typeof n?(8&n&&(r=!0),s=n):"boolean"==typeof n&&(r=n),"string"==typeof e){e=new c(e);const n=this._findNextMatchSync(e,t,r,s);return e.dispose(),n}return this._findNextMatchSync(e,t,r,s)}_findNextMatchSync(e,t,n,r){const s=this._onigBinding;let o;if(o=n?s._findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r):s._findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r),0===o)return null;const i=s.HEAPU32;let a=o/4;const c=i[a++],l=i[a++];let u=[];for(let t=0;t<l;t++){const n=e.convertUtf8OffsetToUtf16(i[a++]),r=e.convertUtf8OffsetToUtf16(i[a++]);u[t]={start:n,end:r,length:r-n}}return{index:c,captureIndices:u}}}t.OnigScanner=l;let u=!1,h=null;t.loadWASM=function(e){if(u)return h;let t,n,r,i;if(u=!0,function(e){return"function"==typeof e.instantiator}(e))t=e.instantiator,n=e.print;else{let r;!function(e){return void 0!==e.data}(e)?r=e:(r=e.data,n=e.print),t=function(e){return"undefined"!=typeof Response&&e instanceof Response}(r)?"function"==typeof WebAssembly.instantiateStreaming?function(e){return t=>WebAssembly.instantiateStreaming(e,t)}(r):function(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}(r):function(e){return t=>WebAssembly.instantiate(e,t)}(r)}return h=new Promise(((e,t)=>{r=e,i=t})),function(e,t,n,r){(0,s.default)({print:t,instantiateWasm:(t,n)=>{if("undefined"==typeof performance){const e=()=>Date.now();t.env.emscripten_get_now=e,t.wasi_snapshot_preview1.emscripten_get_now=e}return e(t).then((e=>n(e.instance)),r),{}}}).then((e=>{o=e,n()}))}(t,n,r,i),h},t.createOnigString=function(e){return new c(e)},t.createOnigScanner=function(e){return new l(e)},t.setDefaultDebugCall=function(e){i=e}},418:e=>{var t=("undefined"!=typeof document&&document.currentScript&&document.currentScript.src,function(e){var t,n,r=void 0!==(e=e||{})?e:{};r.ready=new Promise((function(e,r){t=e,n=r}));var s,o=Object.assign({},r),i=[],a=!1,c=!1,l=!0,u="";function h(e){return r.locateFile?r.locateFile(e,u):u+e}l&&(s=function(e){let t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),_("object"==typeof t),t)},"undefined"!=typeof scriptArgs?i=scriptArgs:void 0!==arguments&&(i=arguments),"undefined"!=typeof onig_print&&("undefined"==typeof console&&(console={}),console.log=onig_print,console.warn=console.error="undefined"!=typeof printErr?printErr:onig_print));var p,d,f=r.print||console.log.bind(console),m=r.printErr||console.warn.bind(console);Object.assign(r,o),o=null,r.arguments&&(i=r.arguments),r.thisProgram&&r.thisProgram,r.quit&&r.quit,r.wasmBinary&&(p=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&B("no native wasm support detected");var g=!1;function _(e,t){e||B(t)}var y,b,S,w="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function v(e,t,n){for(var r=t+n,s=t;e[s]&&!(s>=r);)++s;if(s-t>16&&e.buffer&&w)return w.decode(e.subarray(t,s));for(var o="";t<s;){var i=e[t++];if(128&i){var a=63&e[t++];if(192!=(224&i)){var c=63&e[t++];if((i=224==(240&i)?(15&i)<<12|a<<6|c:(7&i)<<18|a<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var l=i-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&i)<<6|a)}else o+=String.fromCharCode(i)}return o}function R(e,t){return e?v(b,e,t):""}function k(e){y=e,r.HEAP8=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=new Int32Array(e),r.HEAPU8=b=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=S=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}r.INITIAL_MEMORY;var C=[],A=[],P=[];function I(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)N(r.preRun.shift());V(C)}function T(){V(A)}function x(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)O(r.postRun.shift());V(P)}function N(e){C.unshift(e)}function E(e){A.unshift(e)}function O(e){P.unshift(e)}var L=0,G=null,M=null;function D(e){L++,r.monitorRunDependencies&&r.monitorRunDependencies(L)}function j(e){if(L--,r.monitorRunDependencies&&r.monitorRunDependencies(L),0==L&&(null!==G&&(clearInterval(G),G=null),M)){var t=M;M=null,t()}}function B(e){r.onAbort&&r.onAbort(e),m(e="Aborted("+e+")"),g=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}var F,$,W="data:application/octet-stream;base64,";function U(e){return e.startsWith(W)}function H(e){try{if(e==F&&p)return new Uint8Array(p);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function q(){return p||!a&&!c||"function"!=typeof fetch?Promise.resolve().then((function(){return H(F)})):fetch(F,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+F+"'";return e.arrayBuffer()})).catch((function(){return H(F)}))}function z(){var e={env:te,wasi_snapshot_preview1:te};function t(e,t){var n=e.exports;r.asm=n,k((d=r.asm.memory).buffer),r.asm.__indirect_function_table,E(r.asm.__wasm_call_ctors),j()}function s(e){t(e.instance)}function o(t){return q().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){m("failed to asynchronously prepare wasm: "+e),B(e)}))}if(D(),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){m("Module.instantiateWasm callback failed with error: "+e),n(e)}return(p||"function"!=typeof WebAssembly.instantiateStreaming||U(F)||"function"!=typeof fetch?o(s):fetch(F,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(s,(function(e){return m("wasm streaming compile failed: "+e),m("falling back to ArrayBuffer instantiation"),o(s)}))}))).catch(n),{}}function V(e){for(;e.length>0;)e.shift()(r)}function K(e,t,n){b.copyWithin(e,t,t+n)}function Q(e){try{return d.grow(e-y.byteLength+65535>>>16),k(d.buffer),1}catch(e){}}function J(e){var t,n=b.length,r=2147483648;if((e>>>=0)>r)return!1;for(var s=1;s<=4;s*=2){var o=n*(1+.2/s);if(o=Math.min(o,e+100663296),Q(Math.min(r,(t=Math.max(e,o))+(65536-t%65536)%65536)))return!0}return!1}U(F="onig.wasm")||(F=h(F)),$="undefined"!=typeof dateNow?dateNow:()=>performance.now();var X=[null,[],[]];function Y(e,t){var n=X[e];0===t||10===t?((1===e?f:m)(v(n,0)),n.length=0):n.push(t)}function Z(e,t,n,r){for(var s=0,o=0;o<n;o++){var i=S[t>>2],a=S[t+4>>2];t+=8;for(var c=0;c<a;c++)Y(e,b[i+c]);s+=a}return S[r>>2]=s,0}var ee,te={emscripten_get_now:$,emscripten_memcpy_big:K,emscripten_resize_heap:J,fd_write:Z};function ne(e){function n(){ee||(ee=!0,r.calledRun=!0,g||(T(),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),x()))}e=e||i,L>0||(I(),L>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),n()}),1)):n()))}if(z(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._omalloc=function(){return(r._omalloc=r.asm.omalloc).apply(null,arguments)},r._ofree=function(){return(r._ofree=r.asm.ofree).apply(null,arguments)},r._getLastOnigError=function(){return(r._getLastOnigError=r.asm.getLastOnigError).apply(null,arguments)},r._createOnigScanner=function(){return(r._createOnigScanner=r.asm.createOnigScanner).apply(null,arguments)},r._freeOnigScanner=function(){return(r._freeOnigScanner=r.asm.freeOnigScanner).apply(null,arguments)},r._findNextOnigScannerMatch=function(){return(r._findNextOnigScannerMatch=r.asm.findNextOnigScannerMatch).apply(null,arguments)},r._findNextOnigScannerMatchDbg=function(){return(r._findNextOnigScannerMatchDbg=r.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},r.stackSave=function(){return(r.stackSave=r.asm.stackSave).apply(null,arguments)},r.stackRestore=function(){return(r.stackRestore=r.asm.stackRestore).apply(null,arguments)},r.stackAlloc=function(){return(r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.dynCall_jiji).apply(null,arguments)},r.UTF8ToString=R,M=function e(){ee||ne(),ee||(M=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return ne(),e.ready});e.exports=t}},t={},function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(770);var e,t},e.exports=t()},190:function(e){var t,n;e.exports=(t={350:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UseOnigurumaFindOptions=t.DebugFlags=void 0,t.DebugFlags={InDebugMode:"undefined"!=typeof process&&!!process.env.VSCODE_TEXTMATE_DEBUG},t.UseOnigurumaFindOptions=!1},36:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.toOptionalTokenType=t.EncodedTokenAttributes=void 0,(n=t.EncodedTokenAttributes||(t.EncodedTokenAttributes={})).toBinaryStr=function(e){let t=e.toString(2);for(;t.length<32;)t="0"+t;return t},n.print=function(e){const t=n.getLanguageId(e),r=n.getTokenType(e),s=n.getFontStyle(e),o=n.getForeground(e),i=n.getBackground(e);console.log({languageId:t,tokenType:r,fontStyle:s,foreground:o,background:i})},n.getLanguageId=function(e){return(255&e)>>>0},n.getTokenType=function(e){return(768&e)>>>8},n.containsBalancedBrackets=function(e){return 0!=(1024&e)},n.getFontStyle=function(e){return(30720&e)>>>11},n.getForeground=function(e){return(16744448&e)>>>15},n.getBackground=function(e){return(4278190080&e)>>>24},n.set=function(e,t,r,s,o,i,a){let c=n.getLanguageId(e),l=n.getTokenType(e),u=n.containsBalancedBrackets(e)?1:0,h=n.getFontStyle(e),p=n.getForeground(e),d=n.getBackground(e);return 0!==t&&(c=t),8!==r&&(l=r),null!==s&&(u=s?1:0),-1!==o&&(h=o),0!==i&&(p=i),0!==a&&(d=a),(c<<0|l<<8|u<<10|h<<11|p<<15|d<<24)>>>0},t.toOptionalTokenType=function(e){return e}},996:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasicScopeAttributesProvider=t.BasicScopeAttributes=void 0;const r=n(878);class s{constructor(e,t){this.languageId=e,this.tokenType=t}}t.BasicScopeAttributes=s;class o{constructor(e,t){this._getBasicScopeAttributes=new r.CachedFn((e=>{const t=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new s(t,n)})),this._defaultAttributes=new s(e,8),this._embeddedLanguagesMatcher=new i(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return null===e?o._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(o.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}t.BasicScopeAttributesProvider=o,o._NULL_SCOPE_METADATA=new s(0,0),o.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class i{constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map((([e,t])=>r.escapeRegExpCharacters(e)));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}}},947:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineTokens=t.BalancedBracketSelectors=t.StateStack=t.AttributedScopeStack=t.Grammar=t.createGrammar=void 0;const r=n(350),s=n(36),o=n(736),i=n(44),a=n(792),c=n(583),l=n(878),u=n(996),h=n(47);function p(e,t,n,r,s){const i=o.createMatchers(t,d),c=a.RuleFactory.getCompiledRuleId(n,r,s.repository);for(const n of i)e.push({debugSelector:t,matcher:n.matcher,ruleId:c,grammar:s,priority:n.priority})}function d(e,t){if(t.length<e.length)return!1;let n=0;return e.every((e=>{for(let r=n;r<t.length;r++)if(f(t[r],e))return n=r+1,!0;return!1}))}function f(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}t.createGrammar=function(e,t,n,r,s,o,i,a){return new m(e,t,n,r,s,o,i,a)};class m{constructor(e,t,n,r,s,i,a,c){if(this._rootScopeName=e,this.balancedBracketSelectors=i,this._onigLib=c,this._basicScopeAttributesProvider=new u.BasicScopeAttributesProvider(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=a,this._grammar=g(t,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const e of Object.keys(s)){const t=o.createMatchers(e,d);for(const n of t)this._tokenTypeMatchers.push({matcher:n.matcher,type:s[e]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e=[],t=this._rootScopeName,n=(e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e))(t);if(n){const r=n.injections;if(r)for(let t in r)p(e,t,r[t],this,n);const s=this._grammarRepository.injections(t);s&&s.forEach((t=>{const n=this.getExternalGrammar(t);if(n){const t=n.injectionSelector;t&&p(e,t,n,this,n)}}))}return e.sort(((e,t)=>e.priority-t.priority)),e}getInjections(){if(null===this._injections&&(this._injections=this._collectInjections(),r.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const e of this._injections)console.log(`  - ${e.debugSelector}`)}return this._injections}registerRule(e){const t=++this._lastRuleId,n=e(a.ruleIdFromNumber(t));return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[a.ruleIdToNumber(e)]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=g(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){let o;if(-1===this._rootId&&(this._rootId=a.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),t&&t!==y.NULL)o=!1,t.reset();else{o=!0;const e=this._basicScopeAttributesProvider.getDefaultAttributes(),n=this.themeProvider.getDefaults(),r=s.EncodedTokenAttributes.set(0,e.languageId,e.tokenType,null,n.fontStyle,n.foregroundId,n.backgroundId),i=this.getRule(this._rootId).getName(null,null);let a;a=i?_.createRootAndLookUpScopeName(i,r,this):_.createRoot("unknown",r),t=new y(null,this._rootId,-1,-1,!1,null,a,a)}e+="\n";const c=this.createOnigString(e),l=c.content.length,u=new b(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),p=h._tokenizeString(this,c,o,0,t,u,!0,r);return i.disposeOnigString(c),{lineLength:l,lineTokens:u,ruleStack:p.stack,stoppedEarly:p.stoppedEarly}}}function g(e,t){return(e=l.clone(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}t.Grammar=m;class _{constructor(e,t,n){this.parent=e,this.scopePath=t,this.tokenAttributes=n}static createRoot(e,t){return new _(null,new c.ScopeStack(null,e),t)}static createRootAndLookUpScopeName(e,t,n){const r=n.getMetadataForScope(e),s=new c.ScopeStack(null,e),o=n.themeProvider.themeMatch(s),i=_.mergeAttributes(t,r,o);return new _(null,s,i)}get scopeName(){return this.scopePath.scopeName}equals(e){return _._equals(this,e)}static _equals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,n){let r=-1,o=0,i=0;return null!==n&&(r=n.fontStyle,o=n.foregroundId,i=n.backgroundId),s.EncodedTokenAttributes.set(e,t.languageId,t.tokenType,null,r,o,i)}pushAttributed(e,t){if(null===e)return this;if(-1===e.indexOf(" "))return _._pushAttributed(this,e,t);const n=e.split(/ /g);let r=this;for(const e of n)r=_._pushAttributed(r,e,t);return r}static _pushAttributed(e,t,n){const r=n.getMetadataForScope(t),s=e.scopePath.push(t),o=n.themeProvider.themeMatch(s),i=_.mergeAttributes(e.tokenAttributes,r,o);return new _(e,s,i)}getScopeNames(){return this.scopePath.getSegments()}}t.AttributedScopeStack=_;class y{constructor(e,t,n,r,s,o,i,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=i,this.contentNameScopesList=a,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=r}equals(e){return null!==e&&y._equals(this,e)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&e.contentNameScopesList.equals(t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){y._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,n,r,s,o,i){return new y(this,e,t,n,r,s,o,i)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, TODO-${this.nameScopesList}, TODO-${this.contentNameScopesList})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new y(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}}t.StateStack=y,y.NULL=new y(null,0,0,0,!1,null,null,null),t.BalancedBracketSelectors=class{constructor(e,t){this.allowAny=!1,this.balancedBracketScopes=e.flatMap((e=>"*"===e?(this.allowAny=!0,[]):o.createMatchers(e,d).map((e=>e.matcher)))),this.unbalancedBracketScopes=t.flatMap((e=>o.createMatchers(e,d).map((e=>e.matcher))))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}};class b{constructor(e,t,n,s){this.balancedBracketSelectors=s,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,r.DebugFlags.InDebugMode?this._lineText=t:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let n=e.tokenAttributes,o=!1;if(this.balancedBracketSelectors?.matchesAlways&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const t=e.getScopeNames();for(const e of this._tokenTypeOverrides)e.matcher(t)&&(n=s.EncodedTokenAttributes.set(n,0,s.toOptionalTokenType(e.type),null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(t))}if(o&&(n=s.EncodedTokenAttributes.set(n,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n)return void(this._lastTokenEndIndex=t);if(r.DebugFlags.InDebugMode){const n=e.getScopeNames();console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<n.length;e++)console.log("      * "+n[e])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n),void(this._lastTokenEndIndex=t)}const n=e.getScopeNames();if(r.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<n.length;e++)console.log("      * "+n[e])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let e=0,t=this._binaryTokens.length;e<t;e++)n[e]=this._binaryTokens[e];return n}}t.LineTokens=b},965:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInclude=t.TopLevelRepositoryReference=t.TopLevelReference=t.RelativeReference=t.SelfReference=t.BaseReference=t.ScopeDependencyProcessor=t.ExternalReferenceCollector=t.TopLevelRepositoryRuleReference=t.TopLevelRuleReference=void 0;const r=n(878);class s{constructor(e){this.scopeName=e}toKey(){return this.scopeName}}t.TopLevelRuleReference=s;class o{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}}t.TopLevelRepositoryRuleReference=o;class i{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}function a(e,t,n,r){const o=n.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const i=n.lookup(t);e instanceof s?l({baseGrammar:i,selfGrammar:o},r):c(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);const a=n.injections(e.scopeName);if(a)for(const e of a)r.add(new s(e))}function c(e,t,n){t.repository&&t.repository[e]&&u([t.repository[e]],t,n)}function l(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&u(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&u(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function u(e,t,n){for(const i of e){if(n.visitedRule.has(i))continue;n.visitedRule.add(i);const e=i.repository?r.mergeObjects({},t.repository,i.repository):t.repository;Array.isArray(i.patterns)&&u(i.patterns,{...t,repository:e},n);const a=i.include;if(!a)continue;const h=g(a);switch(h.kind){case 0:l({...t,selfGrammar:t.baseGrammar},n);break;case 1:l(t,n);break;case 2:c(h.ruleName,{...t,repository:e},n);break;case 3:case 4:const r=h.scopeName===t.selfGrammar.scopeName?t.selfGrammar:h.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(r){const s={baseGrammar:t.baseGrammar,selfGrammar:r,repository:e};4===h.kind?c(h.ruleName,s,n):l(s,n)}else 4===h.kind?n.add(new o(h.scopeName,h.ruleName)):n.add(new s(h.scopeName))}}}t.ExternalReferenceCollector=i,t.ScopeDependencyProcessor=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new s(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new i;for(const n of e)a(n,this.initialScopeName,this.repo,t);for(const e of t.references)if(e instanceof s){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName))continue;if(this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}};class h{constructor(){this.kind=0}}t.BaseReference=h;class p{constructor(){this.kind=1}}t.SelfReference=p;class d{constructor(e){this.ruleName=e,this.kind=2}}t.RelativeReference=d;class f{constructor(e){this.scopeName=e,this.kind=3}}t.TopLevelReference=f;class m{constructor(e,t){this.scopeName=e,this.ruleName=t,this.kind=4}}function g(e){if("$base"===e)return new h;if("$self"===e)return new p;const t=e.indexOf("#");if(-1===t)return new f(e);if(0===t)return new d(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new m(n,r)}}t.TopLevelRepositoryReference=m,t.parseInclude=g},391:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(947),t)},47:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStackElement=t._tokenizeString=void 0;const r=n(350),s=n(44),o=n(792),i=n(878);class a{constructor(e,t){this.stack=e,this.stoppedEarly=t}}function c(e,t,n,s,c,h,d,f){const m=t.content.length;let g=!1,_=-1;if(d){const i=function(e,t,n,s,i,a){let c=i.beginRuleCapturedEOL?0:-1;const l=[];for(let t=i;t;t=t.pop()){const n=t.getRule(e);n instanceof o.BeginWhileRule&&l.push({rule:n,stack:t})}for(let h=l.pop();h;h=l.pop()){const{ruleScanner:l,findOptions:d}=u(h.rule,e,h.stack.endRule,n,s===c),f=l.findNextMatchSync(t,s,d);if(r.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(l.toString())),!f){r.DebugFlags.InDebugMode&&console.log("  popping "+h.rule.debugName+" - "+h.rule.debugWhileRegExp),i=h.stack.pop();break}if(f.ruleId!==o.whileRuleId){i=h.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(a.produce(h.stack,f.captureIndices[0].start),p(e,t,n,h.stack,a,h.rule.whileCaptures,f.captureIndices),a.produce(h.stack,f.captureIndices[0].end),c=f.captureIndices[0].end,f.captureIndices[0].end>s&&(s=f.captureIndices[0].end,n=!1))}return{stack:i,linePos:s,anchorPosition:c,isFirstLine:n}}(e,t,n,s,c,h);c=i.stack,s=i.linePos,n=i.isFirstLine,_=i.anchorPosition}const y=Date.now();for(;!g;){if(0!==f&&Date.now()-y>f)return new a(c,!0);b()}return new a(c,!1);function b(){r.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${s}: |${t.content.substr(s).replace(/\n$/,"\\n")}|`));const a=function(e,t,n,s,o,a){const c=function(e,t,n,s,o,a){const c=o.getRule(e),{ruleScanner:u,findOptions:h}=l(c,e,o.endRule,n,s===a);let p=0;r.DebugFlags.InDebugMode&&(p=i.performanceNow());const d=u.findNextMatchSync(t,s,h);if(r.DebugFlags.InDebugMode){const e=i.performanceNow()-p;e>5&&console.warn(`Rule ${c.debugName} (${c.id}) matching took ${e} against '${t}'`),console.log(`  scanning for (linePos: ${s}, anchorPosition: ${a})`),console.log(u.toString()),d&&console.log(`matched rule id: ${d.ruleId} from ${d.captureIndices[0].start} to ${d.captureIndices[0].end}`)}return d?{captureIndices:d.captureIndices,matchedRuleId:d.ruleId}:null}(e,t,n,s,o,a),u=e.getInjections();if(0===u.length)return c;const h=function(e,t,n,s,o,i,a){let c,u=Number.MAX_VALUE,h=null,p=0;const d=i.contentNameScopesList.getScopeNames();for(let i=0,f=e.length;i<f;i++){const f=e[i];if(!f.matcher(d))continue;const m=t.getRule(f.ruleId),{ruleScanner:g,findOptions:_}=l(m,t,null,s,o===a),y=g.findNextMatchSync(n,o,_);if(!y)continue;r.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${f.debugSelector}`),console.log(g.toString()));const b=y.captureIndices[0].start;if(!(b>=u)&&(u=b,h=y.captureIndices,c=y.ruleId,p=f.priority,u===o))break}return h?{priorityMatch:-1===p,captureIndices:h,matchedRuleId:c}:null}(u,e,t,n,s,o,a);if(!h)return c;if(!c)return h;const p=c.captureIndices[0].start,d=h.captureIndices[0].start;return d<p||h.priorityMatch&&d===p?h:c}(e,t,n,s,c,_);if(!a)return r.DebugFlags.InDebugMode&&console.log("  no more matches."),h.produce(c,m),void(g=!0);const u=a.captureIndices,d=a.matchedRuleId,f=!!(u&&u.length>0)&&u[0].end>s;if(d===o.endRuleId){const o=c.getRule(e);r.DebugFlags.InDebugMode&&console.log("  popping "+o.debugName+" - "+o.debugEndRegExp),h.produce(c,u[0].start),c=c.withContentNameScopesList(c.nameScopesList),p(e,t,n,c,h,o.endCaptures,u),h.produce(c,u[0].end);const i=c;if(c=c.parent,_=i.getAnchorPos(),!f&&i.getEnterPos()===s)return r.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),c=i,h.produce(c,m),void(g=!0)}else{const i=e.getRule(d);h.produce(c,u[0].start);const a=c,l=i.getName(t.content,u),y=c.contentNameScopesList.pushAttributed(l,e);if(c=c.push(d,s,_,u[0].end===m,null,y,y),i instanceof o.BeginEndRule){const s=i;r.DebugFlags.InDebugMode&&console.log("  pushing "+s.debugName+" - "+s.debugBeginRegExp),p(e,t,n,c,h,s.beginCaptures,u),h.produce(c,u[0].end),_=u[0].end;const o=s.getContentName(t.content,u),l=y.pushAttributed(o,e);if(c=c.withContentNameScopesList(l),s.endHasBackReferences&&(c=c.withEndRule(s.getEndWithResolvedBackReferences(t.content,u))),!f&&a.hasSameRuleAs(c))return r.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),c=c.pop(),h.produce(c,m),void(g=!0)}else if(i instanceof o.BeginWhileRule){const s=i;r.DebugFlags.InDebugMode&&console.log("  pushing "+s.debugName),p(e,t,n,c,h,s.beginCaptures,u),h.produce(c,u[0].end),_=u[0].end;const o=s.getContentName(t.content,u),l=y.pushAttributed(o,e);if(c=c.withContentNameScopesList(l),s.whileHasBackReferences&&(c=c.withEndRule(s.getWhileWithResolvedBackReferences(t.content,u))),!f&&a.hasSameRuleAs(c))return r.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),c=c.pop(),h.produce(c,m),void(g=!0)}else{const s=i;if(r.DebugFlags.InDebugMode&&console.log("  matched "+s.debugName+" - "+s.debugMatchRegExp),p(e,t,n,c,h,s.captures,u),h.produce(c,u[0].end),c=c.pop(),!f)return r.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),c=c.safePop(),h.produce(c,m),void(g=!0)}}u[0].end>s&&(s=u[0].end,n=!1)}}function l(e,t,n,s,o){return r.UseOnigurumaFindOptions?{ruleScanner:e.compile(t,n),findOptions:h(s,o)}:{ruleScanner:e.compileAG(t,n,s,o),findOptions:0}}function u(e,t,n,s,o){return r.UseOnigurumaFindOptions?{ruleScanner:e.compileWhile(t,n),findOptions:h(s,o)}:{ruleScanner:e.compileWhileAG(t,n,s,o),findOptions:0}}function h(e,t){let n=0;return e||(n|=1),t||(n|=4),n}function p(e,t,n,r,o,i,a){if(0===i.length)return;const l=t.content,u=Math.min(i.length,a.length),h=[],p=a[0].end;for(let t=0;t<u;t++){const u=i[t];if(null===u)continue;const f=a[t];if(0===f.length)continue;if(f.start>p)break;for(;h.length>0&&h[h.length-1].endPos<=f.start;)o.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?o.produceFromScopes(h[h.length-1].scopes,f.start):o.produce(r,f.start),u.retokenizeCapturedWithRuleId){const t=u.getName(l,a),i=r.contentNameScopesList.pushAttributed(t,e),h=u.getContentName(l,a),p=i.pushAttributed(h,e),d=r.push(u.retokenizeCapturedWithRuleId,f.start,-1,!1,null,i,p),m=e.createOnigString(l.substring(0,f.end));c(e,m,n&&0===f.start,f.start,d,o,!1,0),s.disposeOnigString(m);continue}const m=u.getName(l,a);if(null!==m){const t=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(m,e);h.push(new d(t,f.end))}}for(;h.length>0;)o.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}t._tokenizeString=c;class d{constructor(e,t){this.scopes=e,this.endPos=t}}t.LocalStackElement=d},974:(e,t)=>{function n(e,t){throw new Error("Near offset "+e.pos+": "+t+" ~~~"+e.source.substr(e.pos,50)+"~~~")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSON=void 0,t.parseJSON=function(e,t,i){let a=new r(e),c=new s,l=0,u=null,h=[],p=[];function d(){h.push(l),p.push(u)}function f(){l=h.pop(),u=p.pop()}function m(e){n(a,e)}for(;o(a,c);){if(0===l){if(null!==u&&m("too many constructs in root"),3===c.type){u={},i&&(u.$vscodeTextmateLocation=c.toLocation(t)),d(),l=1;continue}if(2===c.type){u=[],d(),l=4;continue}m("unexpected token in root")}if(2===l){if(5===c.type){f();continue}if(7===c.type){l=3;continue}m("expected , or }")}if(1===l||3===l){if(1===l&&5===c.type){f();continue}if(1===c.type){let e=c.value;if(o(a,c)&&6===c.type||m("expected colon"),o(a,c)||m("expected value"),l=2,1===c.type){u[e]=c.value;continue}if(8===c.type){u[e]=null;continue}if(9===c.type){u[e]=!0;continue}if(10===c.type){u[e]=!1;continue}if(11===c.type){u[e]=parseFloat(c.value);continue}if(2===c.type){let t=[];u[e]=t,d(),l=4,u=t;continue}if(3===c.type){let n={};i&&(n.$vscodeTextmateLocation=c.toLocation(t)),u[e]=n,d(),l=1,u=n;continue}}m("unexpected token in dict")}if(5===l){if(4===c.type){f();continue}if(7===c.type){l=6;continue}m("expected , or ]")}if(4===l||6===l){if(4===l&&4===c.type){f();continue}if(l=5,1===c.type){u.push(c.value);continue}if(8===c.type){u.push(null);continue}if(9===c.type){u.push(!0);continue}if(10===c.type){u.push(!1);continue}if(11===c.type){u.push(parseFloat(c.value));continue}if(2===c.type){let e=[];u.push(e),d(),l=4,u=e;continue}if(3===c.type){let e={};i&&(e.$vscodeTextmateLocation=c.toLocation(t)),u.push(e),d(),l=1,u=e;continue}m("unexpected token in array")}m("unknown state")}return 0!==p.length&&m("unclosed constructs"),u};class r{constructor(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0}}class s{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(e){return{filename:e,line:this.line,char:this.char}}}function o(e,t){t.value=null,t.type=0,t.offset=-1,t.len=-1,t.line=-1,t.char=-1;let r,s=e.source,o=e.pos,i=e.len,a=e.line,c=e.char;for(;;){if(o>=i)return!1;if(r=s.charCodeAt(o),32!==r&&9!==r&&13!==r){if(10!==r)break;o++,a++,c=0}else o++,c++}if(t.offset=o,t.line=a,t.char=c,34===r){for(t.type=1,o++,c++;;){if(o>=i)return!1;if(r=s.charCodeAt(o),o++,c++,92!==r){if(34===r)break}else o++,c++}t.value=s.substring(t.offset+1,o-1).replace(/\\u([0-9A-Fa-f]{4})/g,((e,t)=>String.fromCodePoint(parseInt(t,16)))).replace(/\\(.)/g,((t,r)=>{switch(r){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:n(e,"invalid escape sequence")}throw new Error("unreachable")}))}else if(91===r)t.type=2,o++,c++;else if(123===r)t.type=3,o++,c++;else if(93===r)t.type=4,o++,c++;else if(125===r)t.type=5,o++,c++;else if(58===r)t.type=6,o++,c++;else if(44===r)t.type=7,o++,c++;else if(110===r){if(t.type=8,o++,c++,r=s.charCodeAt(o),117!==r)return!1;if(o++,c++,r=s.charCodeAt(o),108!==r)return!1;if(o++,c++,r=s.charCodeAt(o),108!==r)return!1;o++,c++}else if(116===r){if(t.type=9,o++,c++,r=s.charCodeAt(o),114!==r)return!1;if(o++,c++,r=s.charCodeAt(o),117!==r)return!1;if(o++,c++,r=s.charCodeAt(o),101!==r)return!1;o++,c++}else if(102===r){if(t.type=10,o++,c++,r=s.charCodeAt(o),97!==r)return!1;if(o++,c++,r=s.charCodeAt(o),108!==r)return!1;if(o++,c++,r=s.charCodeAt(o),115!==r)return!1;if(o++,c++,r=s.charCodeAt(o),101!==r)return!1;o++,c++}else for(t.type=11;;){if(o>=i)return!1;if(r=s.charCodeAt(o),!(46===r||r>=48&&r<=57||101===r||69===r||45===r||43===r))break;o++,c++}return t.len=o-t.offset,null===t.value&&(t.value=s.substr(t.offset,t.len)),e.pos=o,e.line=a,e.char=c,!0}},787:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseRawGrammar=t.INITIAL=t.Registry=void 0;const o=n(391),i=n(50),a=n(652),c=n(583),l=n(965);s(n(44),t),t.Registry=class{constructor(e){this._options=e,this._syncRegistry=new a.SyncRegistry(c.Theme.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(c.Theme.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new o.BalancedBracketSelectors(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}async _loadGrammar(e,t,n,r,s){const o=new l.ScopeDependencyProcessor(this._syncRegistry,e);for(;o.Q.length>0;)await Promise.all(o.Q.map((e=>this._loadSingleGrammar(e.scopeName)))),o.processQueue();return this._grammarForScopeName(e,t,n,r,s)}async _loadSingleGrammar(e){return this._ensureGrammarCache.has(e)||this._ensureGrammarCache.set(e,this._doLoadSingleGrammar(e)),this._ensureGrammarCache.get(e)}async _doLoadSingleGrammar(e){const t=await this._options.loadGrammar(e);if(t){const n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}async addGrammar(e,t=[],n=0,r=null){return this._syncRegistry.addGrammar(e,t),await this._grammarForScopeName(e.scopeName,n,r)}_grammarForScopeName(e,t=0,n=null,r=null,s=null){return this._syncRegistry.grammarForScopeName(e,t,n,r,s)}},t.INITIAL=o.StateStack.NULL,t.parseRawGrammar=i.parseRawGrammar},736:(e,t)=>{function n(e){return!!e&&!!e.match(/[\w\.:]+/)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMatchers=void 0,t.createMatchers=function(e,t){const r=[],s=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}(e);let o=s.next();for(;null!==o;){let e=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=s.next()}let t=a();if(r.push({matcher:t,priority:e}),","!==o)break;o=s.next()}return r;function i(){if("-"===o){o=s.next();const e=i();return t=>!!e&&!e(t)}if("("===o){o=s.next();const e=function(){const e=[];let t=a();for(;t&&(e.push(t),"|"===o||","===o);){do{o=s.next()}while("|"===o||","===o);t=a()}return t=>e.some((e=>e(t)))}();return")"===o&&(o=s.next()),e}if(n(o)){const e=[];do{e.push(o),o=s.next()}while(n(o));return n=>t(e,n)}return null}function a(){const e=[];let t=i();for(;t;)e.push(t),t=i();return t=>e.every((e=>e(t)))}}},44:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disposeOnigString=void 0,t.disposeOnigString=function(e){"function"==typeof e.dispose&&e.dispose()}},50:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRawGrammar=void 0;const r=n(69),s=n(350),o=n(974);t.parseRawGrammar=function(e,t=null){return null!==t&&/\.json$/.test(t)?(n=e,i=t,s.DebugFlags.InDebugMode?o.parseJSON(n,i,!0):JSON.parse(n)):function(e,t){return s.DebugFlags.InDebugMode?r.parseWithLocation(e,t,"$vscodeTextmateLocation"):r.parsePLIST(e)}(e,t);var n,i}},69:(e,t)=>{function n(e,t,n){const r=e.length;let s=0,o=1,i=0;function a(t){if(null===n)s+=t;else for(;t>0;)10===e.charCodeAt(s)?(s++,o++,i=0):(s++,i++),t--}function c(e){null===n?s=e:a(e-s)}function l(){for(;s<r;){let t=e.charCodeAt(s);if(32!==t&&9!==t&&13!==t&&10!==t)break;a(1)}}function u(t){return e.substr(s,t.length)===t&&(a(t.length),!0)}function h(t){let n=e.indexOf(t,s);c(-1!==n?n+t.length:r)}function p(t){let n=e.indexOf(t,s);if(-1!==n){let r=e.substring(s,n);return c(n+t.length),r}{let t=e.substr(s);return c(r),t}}r>0&&65279===e.charCodeAt(0)&&(s=1);let d=0,f=null,m=[],g=[],_=null;function y(e,t){m.push(d),g.push(f),d=e,f=t}function b(){if(0===m.length)return S("illegal state stack");d=m.pop(),f=g.pop()}function S(t){throw new Error("Near offset "+s+": "+t+" ~~~"+e.substr(s,50)+"~~~")}const w=function(){if(null===_)return S("missing <key>");let e={};null!==n&&(e[n]={filename:t,line:o,char:i}),f[_]=e,_=null,y(1,e)},v=function(){if(null===_)return S("missing <key>");let e=[];f[_]=e,_=null,y(2,e)},R=function(){let e={};null!==n&&(e[n]={filename:t,line:o,char:i}),f.push(e),y(1,e)},k=function(){let e=[];f.push(e),y(2,e)};function C(){if(1!==d)return S("unexpected </dict>");b()}function A(){return 1===d||2!==d?S("unexpected </array>"):void b()}function P(e){if(1===d){if(null===_)return S("missing <key>");f[_]=e,_=null}else 2===d?f.push(e):f=e}function I(e){if(isNaN(e))return S("cannot parse float");if(1===d){if(null===_)return S("missing <key>");f[_]=e,_=null}else 2===d?f.push(e):f=e}function T(e){if(isNaN(e))return S("cannot parse integer");if(1===d){if(null===_)return S("missing <key>");f[_]=e,_=null}else 2===d?f.push(e):f=e}function x(e){if(1===d){if(null===_)return S("missing <key>");f[_]=e,_=null}else 2===d?f.push(e):f=e}function N(e){if(1===d){if(null===_)return S("missing <key>");f[_]=e,_=null}else 2===d?f.push(e):f=e}function E(e){if(1===d){if(null===_)return S("missing <key>");f[_]=e,_=null}else 2===d?f.push(e):f=e}function O(){let e=p(">"),t=!1;return 47===e.charCodeAt(e.length-1)&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}function L(e){if(e.isClosed)return"";let t=p("</");return h(">"),t.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,10))})).replace(/&#x([0-9a-f]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,(function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e}))}for(;s<r&&(l(),!(s>=r));){const c=e.charCodeAt(s);if(a(1),60!==c)return S("expected <");if(s>=r)return S("unexpected end of input");const p=e.charCodeAt(s);if(63===p){a(1),h("?>");continue}if(33===p){if(a(1),u("--")){h("--\x3e");continue}h(">");continue}if(47===p){if(a(1),l(),u("plist")){h(">");continue}if(u("dict")){h(">"),C();continue}if(u("array")){h(">"),A();continue}return S("unexpected closed tag")}let m=O();switch(m.name){case"dict":1===d?w():2===d?R():(f={},null!==n&&(f[n]={filename:t,line:o,char:i}),y(1,f)),m.isClosed&&C();continue;case"array":1===d?v():2===d?k():(f=[],y(2,f)),m.isClosed&&A();continue;case"key":G=L(m),1!==d?S("unexpected <key>"):null!==_?S("too many <key>"):_=G;continue;case"string":P(L(m));continue;case"real":I(parseFloat(L(m)));continue;case"integer":T(parseInt(L(m),10));continue;case"date":x(new Date(L(m)));continue;case"data":N(L(m));continue;case"true":L(m),E(!0);continue;case"false":L(m),E(!1);continue}if(!/^plist/.test(m.name))return S("unexpected opened tag "+m.name)}var G;return f}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePLIST=t.parseWithLocation=void 0,t.parseWithLocation=function(e,t,r){return n(e,t,r)},t.parsePLIST=function(e){return n(e,null,null)}},652:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncRegistry=void 0;const r=n(391);t.SyncRegistry=class{constructor(e,t){this._onigLibPromise=t,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}async grammarForScopeName(e,t,n,s,o){if(!this._grammars.has(e)){let i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,r.createGrammar(e,i,t,n,s,o,this,await this._onigLibPromise))}return this._grammars.get(e)}}},792:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompiledRule=t.RegExpSourceList=t.RegExpSource=t.RuleFactory=t.BeginWhileRule=t.BeginEndRule=t.IncludeOnlyRule=t.MatchRule=t.CaptureRule=t.Rule=t.ruleIdToNumber=t.ruleIdFromNumber=t.whileRuleId=t.endRuleId=void 0;const r=n(878),s=n(965),o=/\\(\d+)/,i=/\\(\d+)/g;Symbol("RuleId"),t.endRuleId=-1,t.whileRuleId=-2,t.ruleIdFromNumber=function(e){return e},t.ruleIdToNumber=function(e){return e};class a{constructor(e,t,n,s){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=r.RegexSource.hasCaptures(this._name),this._contentName=s||null,this._contentNameIsCapturing=r.RegexSource.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${r.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?r.RegexSource.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?r.RegexSource.replaceCaptures(this._contentName,e,t):this._contentName}}t.Rule=a;class c extends a{constructor(e,t,n,r,s){super(e,t,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,n,r){throw new Error("Not supported!")}}t.CaptureRule=c;class l extends a{constructor(e,t,n,r,s){super(e,t,n,null),this._match=new f(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new m,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.MatchRule=l;class u extends a{constructor(e,t,n,r,s){super(e,t,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const n of this.patterns)e.getRule(n).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new m,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.IncludeOnlyRule=u;class h extends a{constructor(e,t,n,r,s,o,i,a,c,l){super(e,t,n,r),this._begin=new f(s,this.id),this.beginCaptures=o,this._end=new f(i||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=c||!1,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new m;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}t.BeginEndRule=h;class p extends a{constructor(e,n,r,s,o,i,a,c,l){super(e,n,r,s),this._begin=new f(o,this.id),this.beginCaptures=i,this.whileCaptures=c,this._while=new f(a,t.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new m;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new m,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||""),this._cachedCompiledWhilePatterns}}t.BeginWhileRule=p;class d{static createCaptureRule(e,t,n,r,s){return e.registerRule((e=>new c(t,e,n,r,s)))}static getCompiledRuleId(e,t,n){return e.id||t.registerRule((s=>{if(e.id=s,e.match)return new l(e.$vscodeTextmateLocation,e.id,e.name,e.match,d._compileCaptures(e.captures,t,n));if(void 0===e.begin){e.repository&&(n=r.mergeObjects({},n,e.repository));let s=e.patterns;return void 0===s&&e.include&&(s=[{include:e.include}]),new u(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,d._compilePatterns(s,t,n))}return e.while?new p(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,d._compileCaptures(e.beginCaptures||e.captures,t,n),e.while,d._compileCaptures(e.whileCaptures||e.captures,t,n),d._compilePatterns(e.patterns,t,n)):new h(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,d._compileCaptures(e.beginCaptures||e.captures,t,n),e.end,d._compileCaptures(e.endCaptures||e.captures,t,n),e.applyEndPatternLast,d._compilePatterns(e.patterns,t,n))})),e.id}static _compileCaptures(e,t,n){let r=[];if(e){let s=0;for(const t in e){if("$vscodeTextmateLocation"===t)continue;const e=parseInt(t,10);e>s&&(s=e)}for(let e=0;e<=s;e++)r[e]=null;for(const s in e){if("$vscodeTextmateLocation"===s)continue;const o=parseInt(s,10);let i=0;e[s].patterns&&(i=d.getCompiledRuleId(e[s],t,n)),r[o]=d.createCaptureRule(t,e[s].$vscodeTextmateLocation,e[s].name,e[s].contentName,i)}}return r}static _compilePatterns(e,t,n){let r=[];if(e)for(let o=0,i=e.length;o<i;o++){const i=e[o];let a=-1;if(i.include){const e=s.parseInclude(i.include);switch(e.kind){case 0:case 1:a=d.getCompiledRuleId(n[i.include],t,n);break;case 2:let r=n[e.ruleName];r&&(a=d.getCompiledRuleId(r,t,n));break;case 3:case 4:const s=e.scopeName,o=4===e.kind?e.ruleName:null,c=t.getExternalGrammar(s,n);if(c)if(o){let e=c.repository[o];e&&(a=d.getCompiledRuleId(e,t,c.repository))}else a=d.getCompiledRuleId(c.repository.$self,t,c.repository)}}else a=d.getCompiledRuleId(i,t,n);if(-1!==a){const e=t.getRule(a);let n=!1;if((e instanceof u||e instanceof h||e instanceof p)&&e.hasMissingPatterns&&0===e.patterns.length&&(n=!0),n)continue;r.push(a)}}return{patterns:r,hasMissingPatterns:(e?e.length:0)!==r.length}}}t.RuleFactory=d;class f{constructor(e,t){if(e){const t=e.length;let n=0,r=[],s=!1;for(let o=0;o<t;o++)if("\\"===e.charAt(o)&&o+1<t){const t=e.charAt(o+1);"z"===t?(r.push(e.substring(n,o)),r.push("$(?!\\n)(?<!\\n)"),n=o+2):"A"!==t&&"G"!==t||(s=!0),o++}this.hasAnchor=s,0===n?this.source=e:(r.push(e.substring(n,t)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=o.test(this.source)}clone(){return new f(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){let n=t.map((t=>e.substring(t.start,t.end)));return i.lastIndex=0,this.source.replace(i,((e,t)=>r.escapeRegExpCharacters(n[parseInt(t,10)]||"")))}_buildAnchorCache(){let e,t,n,r,s=[],o=[],i=[],a=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),s[e]=n,o[e]=n,i[e]=n,a[e]=n,"\\"===n&&e+1<t&&(r=this.source.charAt(e+1),"A"===r?(s[e+1]="",o[e+1]="",i[e+1]="A",a[e+1]="A"):"G"===r?(s[e+1]="",o[e+1]="G",i[e+1]="",a[e+1]="G"):(s[e+1]=r,o[e+1]=r,i[e+1]=r,a[e+1]=r),e++);return{A0_G0:s.join(""),A0_G1:o.join(""),A1_G0:i.join(""),A1_G1:a.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}t.RegExpSource=f;class m{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map((e=>e.source));this._cached=new g(e,t,this._items.map((e=>e.ruleId)))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map((e=>e.resolveAnchors(t,n)));return new g(e,r,this._items.map((e=>e.ruleId)))}}t.RegExpSourceList=m;class g{constructor(e,t,n){this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}t.CompiledRule=g},583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeTrieElement=t.ThemeTrieElementRule=t.ColorMap=t.fontStyleToString=t.ParsedThemeRule=t.parseTheme=t.StyleAttributes=t.ScopeStack=t.Theme=void 0;const r=n(878);class s{constructor(e,t,n){this._colorMap=e,this._defaults=t,this._root=n,this._cachedMatchRoot=new r.CachedFn((e=>this._root.match(e)))}static createFromRawTheme(e,t){return this.createFromParsedTheme(c(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort(((e,t)=>{let n=r.strcmp(e.scope,t.scope);return 0!==n?n:(n=r.strArrCmp(e.parentScopes,t.parentScopes),0!==n?n:e.index-t.index)}));let n=0,o="#000000",i="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(n=t.fontStyle),null!==t.foreground&&(o=t.foreground),null!==t.background&&(i=t.background)}let c=new u(t),l=new a(n,c.getId(o),c.getId(i)),d=new p(new h(0,null,-1,0,0),[]);for(let t=0,n=e.length;t<n;t++){let n=e[t];d.insert(0,n.scope,n.parentScopes,n.fontStyle,c.getId(n.foreground),c.getId(n.background))}return new s(c,l,d)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;const t=e.scopeName,n=this._cachedMatchRoot.get(t).find((t=>function(e,t){if(null===t)return!0;let n=0,r=t[n];for(;e;){if(i(e.scopeName,r)){if(n++,n===t.length)return!0;r=t[n]}e=e.parent}return!1}(e.parent,t.parentScopes)));return n?new a(n.fontStyle,n.foreground,n.background):null}}t.Theme=s;class o{constructor(e,t){this.parent=e,this.scopeName=t}static from(...e){let t=null;for(let n=0;n<e.length;n++)t=new o(t,e[n]);return t}push(e){return new o(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}}function i(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}t.ScopeStack=o;class a{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}}function c(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],s=0;for(let e=0,o=t.length;e<o;e++){let o,i=t[e];if(!i.settings)continue;if("string"==typeof i.scope){let e=i.scope;e=e.replace(/^[,]+/,""),e=e.replace(/[,]+$/,""),o=e.split(",")}else o=Array.isArray(i.scope)?i.scope:[""];let a=-1;if("string"==typeof i.settings.fontStyle){a=0;let e=i.settings.fontStyle.split(" ");for(let t=0,n=e.length;t<n;t++)switch(e[t]){case"italic":a|=1;break;case"bold":a|=2;break;case"underline":a|=4;break;case"strikethrough":a|=8}}let c=null;"string"==typeof i.settings.foreground&&r.isValidHexColor(i.settings.foreground)&&(c=i.settings.foreground);let u=null;"string"==typeof i.settings.background&&r.isValidHexColor(i.settings.background)&&(u=i.settings.background);for(let t=0,r=o.length;t<r;t++){let r=o[t].trim().split(" "),i=r[r.length-1],h=null;r.length>1&&(h=r.slice(0,r.length-1),h.reverse()),n[s++]=new l(i,h,e,a,c,u)}}return n}t.StyleAttributes=a,t.parseTheme=c;class l{constructor(e,t,n,r,s,o){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=s,this.background=o}}t.ParsedThemeRule=l,t.fontStyleToString=function(e){if(-1===e)return"not set";let t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),8&e&&(t+="strikethrough "),""===t&&(t="none"),t.trim()};class u{constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}}t.ColorMap=u;class h{constructor(e,t,n,r,s){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=n,this.foreground=r,this.background=s}clone(){return new h(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}acceptOverwrite(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}}t.ThemeTrieElementRule=h;class p{constructor(e,t=[],n={}){this._mainRule=e,this._children=n,this._rulesWithParentScopes=t}static _sortBySpecificity(e){return 1===e.length||e.sort(this._cmpBySpecificity),e}static _cmpBySpecificity(e,t){if(e.scopeDepth===t.scopeDepth){const n=e.parentScopes,r=t.parentScopes;let s=null===n?0:n.length,o=null===r?0:r.length;if(s===o)for(let e=0;e<s;e++){const t=n[e].length,s=r[e].length;if(t!==s)return s-t}return o-s}return t.scopeDepth-e.scopeDepth}match(e){if(""===e)return p._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let t,n,r=e.indexOf(".");return-1===r?(t=e,n=""):(t=e.substring(0,r),n=e.substring(r+1)),this._children.hasOwnProperty(t)?this._children[t].match(n):p._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(e,t,n,r,s,o){if(""===t)return void this._doInsertHere(e,n,r,s,o);let i,a,c,l=t.indexOf(".");-1===l?(i=t,a=""):(i=t.substring(0,l),a=t.substring(l+1)),this._children.hasOwnProperty(i)?c=this._children[i]:(c=new p(this._mainRule.clone(),h.cloneArr(this._rulesWithParentScopes)),this._children[i]=c),c.insert(e+1,a,n,r,s,o)}_doInsertHere(e,t,n,s,o){if(null!==t){for(let i=0,a=this._rulesWithParentScopes.length;i<a;i++){let a=this._rulesWithParentScopes[i];if(0===r.strArrCmp(a.parentScopes,t))return void a.acceptOverwrite(e,n,s,o)}-1===n&&(n=this._mainRule.fontStyle),0===s&&(s=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new h(e,t,n,s,o))}else this._mainRule.acceptOverwrite(e,n,s,o)}}t.ThemeTrieElement=p},878:(e,t)=>{function n(e){return Array.isArray(e)?function(e){let t=[];for(let r=0,s=e.length;r<s;r++)t[r]=n(e[r]);return t}(e):"object"==typeof e?function(e){let t={};for(let r in e)t[r]=n(e[r]);return t}(e):e}Object.defineProperty(t,"__esModule",{value:!0}),t.performanceNow=t.CachedFn=t.escapeRegExpCharacters=t.isValidHexColor=t.strArrCmp=t.strcmp=t.RegexSource=t.basename=t.mergeObjects=t.clone=void 0,t.clone=function(e){return n(e)},t.mergeObjects=function(e,...t){return t.forEach((t=>{for(let n in t)e[n]=t[n]})),e},t.basename=function e(t){const n=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return 0===n?t:~n==t.length-1?e(t.substring(0,t.length-1)):t.substr(1+~n)};let r=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function s(e,t){return e<t?-1:e>t?1:0}t.RegexSource=class{static hasCaptures(e){return null!==e&&(r.lastIndex=0,r.test(e))}static replaceCaptures(e,t,n){return e.replace(r,((e,r,s,o)=>{let i=n[parseInt(r||s,10)];if(!i)return e;{let e=t.substring(i.start,i.end);for(;"."===e[0];)e=e.substring(1);switch(o){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}}))}},t.strcmp=s,t.strArrCmp=function(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let r=0;r<n;r++){let n=s(e[r],t[r]);if(0!==n)return n}return 0}return n-r},t.isValidHexColor=function(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))},t.escapeRegExpCharacters=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},t.CachedFn=class{constructor(e){this.fn=e,this.cache=new Map}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},t.performanceNow="undefined"==typeof performance?function(){return Date.now()}:function(){return performance.now()}}},n={},function e(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}(787))}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{n.d(r,{oP:()=>y,IU:()=>h,N7:()=>p,eT:()=>f,OW:()=>m,cc:()=>i,jf:()=>a,_M:()=>c,Mj:()=>o});var e=n(930),t=n(190);const s=["/","(",")","[","]","{","}"];function o(e){const t=new DocumentFragment;for(const n of e)s.includes(n)?(t.append(document.createElement("wbr")),t.append(n),t.append(document.createElement("wbr"))):t.append(n);return t}function i(e){return e.replace(/\t/g,"    ")}function a(e,t){const n=(e=i(e)).split("\n"),r=new DocumentFragment;if(!t&&n.length<2){const t=document.createElement("span");return t.append(o(e)),r.append(t),r}for(const e of n){const t=document.createElement("div");if(r.append(t),0===e.length){t.textContent="\n";continue}const n=e.match(/^ */)[0];t.style.marginLeft=`${n.length}ch`,t.append(o(e.slice(n.length)));const s=document.createElement("span");s.style.display="inline-block",s.style.width="0",s.style.lineHeight="0",s.textContent=n,t.prepend(s)}return r}function c(e,t){const n=t||e.includes("\n")?document.createElement("pre"):document.createElement("code");return n.append(a(e,t)),n}const{getMod:l}=function(e){const t={},n=new EventTarget;for(const r in e)n.addEventListener(`load-${r}`,(async()=>{t[r]=await new Function(`return import(${JSON.stringify(e[r])})`)(),n.dispatchEvent(new Event(`loaded-${r}`))}),{once:!0});return{getMod:async function(e){const r=t[e];return void 0!==r?r:(n.dispatchEvent(new Event(`load-${e}`)),new Promise((r=>{n.addEventListener(`loaded-${e}`,(()=>{r(t[e])}))})))}}}({json5:"https://cdn.jsdelivr.net/npm/json5@2.2.3/dist/index.min.mjs"});var u=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};function h(e,t){const{contributes:n}=e;if(void 0===n)return[];const{grammars:r}=n;if(void 0===r)return[];r.reverse();const s=[];for(const{language:e,scopeName:n,path:o,injectTo:i}of r){let r=o;try{r=new URL(o,t).href}catch(e){console.log(e)}s.push({name:e,scopeName:n,syntaxSrc:r,scopeNamesToInject:i})}return s}function p(e,t){return u(this,void 0,void 0,(function*(){const n=[];for(const r of e){const e=new URL(r,t);n.push((()=>u(this,void 0,void 0,(function*(){try{const t=yield fetch(e.href);return t.ok?h((yield l("json5")).default.parse(yield t.text()),e.href):[]}catch(e){return console.log(e),[]}})))())}return(yield Promise.all(n)).flat()}))}var d=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};function f(e){const{tokenColors:t}=e;if(void 0===t)return[];const n=[];for(const{scope:e,settings:{fontStyle:r,foreground:s}}of t){const t={color:s};void 0!==r&&(r.includes("bold")?t.fontWeight="bold":t.fontWeight="",r.includes("underline")?t.textDecoration="underline":t.textDecoration="",r.includes("italic")?t.fontStyle="italic":t.fontStyle=""),n.push({scopeNames:"string"==typeof e?[e]:e,style:t})}return n}function m(e,t){return d(this,void 0,void 0,(function*(){const n=[];for(const r of e){const e=new URL(r,t);n.push((()=>d(this,void 0,void 0,(function*(){try{const t=yield fetch(e.href);if(!t.ok)return[];const n=(yield l("json5")).default.parse(yield t.text());"string"==typeof n.include&&(n.include=[n.include]);const r=[];return void 0!==n.include&&r.push(...yield m(n.include,e.href)),r.push(...f(n)),r}catch(e){return console.log(e),[]}})))())}return(yield Promise.all(n)).flat()}))}var g=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};function _(){return g(this,void 0,void 0,(function*(){const t=yield(yield(yield fetch("https://cdn.jsdelivr.net/npm/vscode-oniguruma@1.7.0/release/onig.wasm")).blob()).arrayBuffer();return yield(0,e.loadWASM)(t),{createOnigScanner:t=>new e.OnigScanner(t),createOnigString:t=>new e.OnigString(t)}}))}class y{constructor(e,n){this.theme=n,this.scopeNameToInjectedScopeNames={},this.scopeNameToSyntaxSrc={},this.languageNameToRootScopeName={},this.scopeNameToGrammar={},this.registry=new t.Registry({onigLib:_(),loadGrammar:e=>g(this,void 0,void 0,(function*(){let n=this.scopeNameToGrammar[e];if(void 0!==n)return n;const r=this.scopeNameToSyntaxSrc[e];if(void 0===r)return this.scopeNameToGrammar[e]=null;try{const n=new URL(r),s=yield(yield fetch(r)).text();return n.pathname.endsWith(".json")?this.scopeNameToGrammar[e]=(yield l("json5")).default.parse(s):this.scopeNameToGrammar[e]=(0,t.parseRawGrammar)(s)}catch(t){return this.scopeNameToGrammar[e]=null}})),getInjections:e=>this.scopeNameToInjectedScopeNames[e]}),this.textToPlainInlineDocumentFragment=o,this.textToPlainDocumentFragment=a,this.textToPlainElement=c;for(const{name:t,alias:n,scopeName:r,syntaxSrc:s}of e){if(void 0!==r&&void 0!==s&&(this.scopeNameToSyntaxSrc[r]=s),void 0===t)continue;let e=this.languageNameToRootScopeName[t];void 0===e&&(this.languageNameToRootScopeName[t]=e=r);for(const t of null!=n?n:[])this.languageNameToRootScopeName[t]=e}for(const{scopeName:t,scopeNamesToInject:n}of e)if(null!=t)for(const e of null!=n?n:[]){let n=this.scopeNameToInjectedScopeNames[e];void 0===n&&(this.scopeNameToInjectedScopeNames[e]=n=[]),n.push(t)}}createTokenSpan(e,t){const n=document.createElement("span");n.append(o(e));for(const e of t){let t="";for(const{scopeNames:r,style:s}of this.theme){const o=r.find((t=>e.startsWith(t)));void 0===o||o.length<t.length||(t=o,void 0!==s.color&&(n.style.color=s.color),void 0!==s.fontStyle&&(n.style.fontStyle=s.fontStyle),void 0!==s.fontWeight&&(n.style.fontWeight=s.fontWeight),void 0!==s.textDecoration&&(n.style.textDecoration=s.textDecoration))}}return n}highlightToDocumentFragment(e,n,r){return g(this,void 0,void 0,(function*(){e=i(e);const s=this.languageNameToRootScopeName[n];if(void 0===s)return a(e,r);const o=yield this.registry.loadGrammar(s);if(null===o)return a(e,r);const c=e.split("\n"),l=new DocumentFragment;let u=t.INITIAL;if(!r&&c.length<2){for(const t of o.tokenizeLine(e,u).tokens)l.append(this.createTokenSpan(e.slice(t.startIndex,t.endIndex),t.scopes));return l}for(const e of c){const t=document.createElement("div");l.append(t);const n=o.tokenizeLine(e,u);let r="",s=!1;for(const o of n.tokens){const n=e.slice(o.startIndex,o.endIndex);if(!s){if(null===n.match(/[^ ]/)){r+=n;continue}s=!0}t.append(this.createTokenSpan(n,o.scopes))}if(u=n.ruleStack,0===e.length){t.textContent="\n";continue}t.style.marginLeft=`${r.length}ch`;const i=document.createElement("span");i.style.display="inline-block",i.style.width="0",i.style.lineHeight="0",i.textContent=r,t.prepend(i)}return l}))}highlightToElement(e,t,n){return g(this,void 0,void 0,(function*(){const r=n||e.includes("\n")?document.createElement("pre"):document.createElement("code");return r.append(yield this.highlightToDocumentFragment(e,t,n)),r}))}}})();var s=r.oP,o=r.IU,i=r.N7,a=r.eT,c=r.OW,l=r.cc,u=r.jf,h=r._M,p=r.Mj;export{s as Highlighter,o as extractLangInfoArrayFromVSCE,i as extractLangInfoArrayFromVSCEURLs,a as extractThemeFromVSCT,c as extractThemeFromVSCTURLs,l as replaceTabs,u as textToPlainDocumentFragment,h as textToPlainElement,p as textToPlainInlineDocumentFragment};